(this["webpackJsonpclient-side"]=this["webpackJsonpclient-side"]||[]).push([[0],{102:function(e,t,a){e.exports=a.p+"static/media/bookmarks-outline.00c4029b.png"},103:function(e,t,a){e.exports=a.p+"static/media/star-outline.aa9dfbdc.png"},108:function(e,t,a){e.exports=a(135)},120:function(e,t,a){},121:function(e,t,a){},123:function(e,t,a){},124:function(e,t,a){},125:function(e,t,a){},126:function(e,t,a){},128:function(e,t,a){},129:function(e,t,a){},130:function(e,t,a){},131:function(e,t,a){},132:function(e,t,a){},133:function(e,t,a){},134:function(e,t,a){},135:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(14),l=a.n(o),i=a(56),c=a(18),s=a(96),u=a(16),m=a(28),d=a(169),p=a(177),f=a(176),g=a(172),b=a(175),v=Object(d.a)((function(e){return{dropdownStyle:{borderRadius:"5%",backgroundColor:"#2b3137",margin:0},formControl:{minWidth:150,backgroundColor:"white"},InputLabel:{color:"black"},MenuItem:{backgroundColor:"#2b3137",color:"white","&:hover ":{backgroundColor:"white",color:"#2b3137"}}}})),h=function(e){var t=e.toggleFeild,a=v(),o=Object(n.useState)("User"),l=Object(m.a)(o,2),i=l[0],c=l[1];return r.a.createElement("div",{className:"select",style:{marginRight:"1rem"}},r.a.createElement(g.a,{variant:"filled",className:a.formControl},r.a.createElement(p.a,{id:"demo-simple-select-filled-label",className:a.InputLabel},"Filed"),r.a.createElement(b.a,{labelId:"demo-simple-select-filled-label",id:"demo-simple-select-filled",value:i,onChange:function(e){var a=e.target;c(a.value),t(a.value)},MenuProps:{classes:{paper:a.dropdownStyle}},disableUnderline:!0,color:"primary"},r.a.createElement(f.a,{className:a.MenuItem,value:"Repository"},"Repository"),r.a.createElement(f.a,{className:a.MenuItem,value:"User"},"User"))))},E=(a(120),a(99)),N=a.n(E),y=Object(n.createContext)(),w=function(e){var t=Object(n.useState)(""),a=Object(m.a)(t,2),o=a[0],l=a[1],i=Object(n.useState)(""),c=Object(m.a)(i,2),s=c[0],u=c[1],d=Object(n.useState)(""),p=Object(m.a)(d,2),f=p[0],g=p[1];return r.a.createElement(y.Provider,{value:{userName:o,repoName:s,ownerName:f,updateUserName:function(e){var t=e.target;l(t.value)},updateRepoName:function(e){var t=e.target;u(t.value)},updateOwnerName:function(e){var t=e.target;g(t.value)}}},e.children)},O=function(e){var t=e.field,a=e.handleSubmitWithClick,o=Object(n.useContext)(y);return r.a.createElement("div",{className:"input",style:"repo-name"===t?{marginBottom:"1rem"}:null},r.a.createElement("input",{value:o[t],onChange:o["update".concat(t[0].toUpperCase()+t.slice(1))],type:"text",placeholder:function(e){return"repoName"===e?"Type repository name...":"ownerName"===e?"Type repository's owner...":"Type username..."}(t)}),"userName"===t&&r.a.createElement("img",{onClick:a,src:N.a,alt:"search icon"}))},C=function(e){var t=e.fieldSelected,a=e.handleSubmitWithClick;return"User"===t?r.a.createElement(O,{field:"userName",handleSubmitWithClick:a}):r.a.createElement("div",{className:"search__inputs-containner"},r.a.createElement(O,{field:"repoName"}),r.a.createElement(O,{field:"ownerName"}))},j=a(72),S=a.n(j),k=(a(121),function(e){var t=e.history,a=Object(n.useState)("User"),o=Object(m.a)(a,2),l=o[0],i=o[1],c=Object(n.useContext)(y),s=function(e){"Enter"!==e.key&&"click"!==e.type||("User"===l?(t.push("/profile/@".concat(c.userName.trim())),c.updateUserName({target:{value:""}})):(t.push("/repository/".concat(c.repoName.trim(),"/@").concat(c.ownerName.trim())),c.updateOwnerName({target:{value:""}}),c.updateRepoName({target:{value:""}})))};return r.a.createElement("div",{className:"search",onKeyPress:s},r.a.createElement("div",{className:"search__title"},r.a.createElement("h1",null,"GitHub Search"),r.a.createElement("img",{src:S.a,alt:"github cat"})),r.a.createElement("div",{className:"search__form-containner"},r.a.createElement(h,{toggleFeild:i}),r.a.createElement(C,{fieldSelected:l,handleSubmitWithClick:s})))}),_=a(100),x=Object(n.createContext)(),I=a(53);function R(){var e=Object(I.a)(["\n  query getRepositoryData($repoName: String!, $ownerName: String!) {\n    repository(name: $repoName, owner: $ownerName) {\n      id\n      name\n      owner {\n        login\n      }\n      viewerHasStarred\n      stargazers {\n        totalCount\n      }\n      createdAt\n      isPrivate\n      watchers {\n        totalCount\n      }\n      licenseInfo {\n        name\n      }\n      languages(first: 5) {\n        edges {\n          node {\n            name\n          }\n        }\n      }\n      description\n    }\n  }\n"]);return R=function(){return e},e}function U(){var e=Object(I.a)(["\n  query getUserData($login: String!, $cursor: String) {\n    user(login: $login) {\n      login\n      avatarUrl\n      bio\n      followers {\n        totalCount\n      }\n      repositories(first: 4, after: $cursor) {\n        edges {\n          node {\n            isPrivate\n            owner {\n              login\n            }\n            watchers {\n              totalCount\n            }\n            description\n            languages(first: 5) {\n              edges {\n                node {\n                  name\n                }\n              }\n            }\n            id\n            name\n            stargazers {\n              totalCount\n            }\n            licenseInfo {\n              name\n            }\n            createdAt\n          }\n        }\n        pageInfo {\n          hasNextPage\n          endCursor\n        }\n      }\n    }\n  }\n"]);return U=function(){return e},e}var F=Object(c.gql)(U()),M=Object(c.gql)(R());function P(){var e=Object(I.a)(["\n  mutation($input: RemoveStarInput!) {\n    removeStar(input: $input) {\n      starrable {\n        id\n        viewerHasStarred\n        stargazers {\n          totalCount\n        }\n      }\n    }\n  }\n"]);return P=function(){return e},e}function z(){var e=Object(I.a)(["\n  mutation($input: AddStarInput!) {\n    addStar(input: $input) {\n      starrable {\n        id\n        viewerHasStarred\n        stargazers {\n          totalCount\n        }\n      }\n    }\n  }\n"]);return z=function(){return e},e}var L=Object(c.gql)(z()),A=Object(c.gql)(P()),T=a(74),$=function(e){var t=e.split("T")[0].split("-");return"".concat(["January","February","March","April","May","June","July","August","September","October","November","December"][t[1]-1]," ").concat(t[2],", ").concat(t[0])},q=a(101),D=(a(123),r.a.memo((function(e){var t,a=e.large,n=e.fieldName,o=e.data;if("Languages"===n&&Array.isArray(o)){var l,i=[],c=Object(q.a)(o);try{for(c.s();!(l=c.n()).done;){var s=l.value;i.push(s.node.name)}}catch(u){c.e(u)}finally{c.f()}t=i.join(", ")}else t=o;return r.a.createElement("div",{className:"info-box"},r.a.createElement("div",{className:a?"info-box__black-part--large":"info-box__black-part"},n),r.a.createElement("div",{className:"info-box__white-part"},t))}),(function(e,t){return"Stars"!==e.fieldName||e.data===t.data}))),H=(a(124),function(e){var t=e.large,a=e.pos,o=Object(n.useContext)(x);return"left"===a?r.a.createElement("div",{className:"info-boxes"},r.a.createElement(D,{large:t,fieldName:"Owner",data:o.owner.login}),r.a.createElement(D,{large:t,fieldName:"Stars",data:o.stargazers.totalCount}),r.a.createElement(D,{large:t,fieldName:"Created at",data:$(o.createdAt)}),r.a.createElement(D,{large:t,fieldName:"Public/Private",data:o.isPrivate?"Private":"Public"}),r.a.createElement(D,{large:t,fieldName:"Watchers",data:o.watchers.totalCount}),r.a.createElement(D,{large:t,fieldName:"Lincense Info",data:o.licenseInfo?o.licenseInfo.name:"No License"})):r.a.createElement("div",{className:"info-boxes"},r.a.createElement(D,{large:t,fieldName:"Languages",data:o.languages.edges.length>0?o.languages.edges:"No code"}),r.a.createElement(D,{large:t,fieldName:"Description",data:o.description?o.description:"No Description"}))}),Q=(a(125),function(e){var t=e.star_unStar,a=e.viewerStared;return r.a.createElement("div",{className:"white-wrapper"},r.a.createElement("img",{src:S.a,alt:"github icon"}),r.a.createElement("div",{className:"white-wrapper__repo-data"},r.a.createElement(H,{large:!1,pos:"left"}),r.a.createElement(H,{large:!0,pos:"right"})),r.a.createElement("div",{className:"hr"}),r.a.createElement("button",{type:"button",onClick:t},a?"Unstar":"Star"))}),W=a(174),J=Object(d.a)((function(e){return{root:{position:"absolute",left:"50%",top:"50%",transform:"translate(-50%, -50%)"},bottom:{color:e.palette.grey["light"===e.palette.type?200:700]},top:{color:"#2b3137",animationDuration:"600ms",position:"absolute",left:0},circle:{strokeLinecap:"round"}}}));function B(e){var t=J();return r.a.createElement("div",{className:t.root},r.a.createElement(W.a,Object.assign({variant:"determinate",className:t.bottom,size:40,thickness:4},e,{value:100})),r.a.createElement(W.a,Object.assign({variant:"indeterminate",disableShrink:!0,className:t.top,classes:{circle:t.circle},size:40,thickness:4},e)))}var G=Object(d.a)({root:{flexGrow:1}}),K=function(){var e=G();return r.a.createElement("div",{className:e.root},r.a.createElement(B,null))},V=(a(126),function(e){var t=e.match.params,a=t.reponame,n=t.owner,o={variables:{repoName:a,ownerName:n.slice(1)}},l=Object(c.useQuery)(M,o),i=l.data,s=l.loading,d=l.error,p=function(e){var t="+"===e?"addStar":"removeStar";return{optimisticResponse:Object(_.a)({__typename:"Mutation"},t,{__typename:"+"===e?"AddStarPayload":"RemoveStarPayload",starrable:{__typename:"Repository",viewerHasStarred:"+"===e,id:i&&i.repository.id,stargazers:{__typename:"StargazerConnection",totalCount:"+"===e?i&&i.repository.stargazers.totalCount+1:i&&i.repository.stargazers.totalCount-1}}}),update:function(e,r){var o=r.data,l=e.readQuery({query:M,variables:{repoName:a,ownerName:n.slice(1)}}),i=Object(T.a)(l,(function(e){e.repository.viewerHasStarred=o[t].starrable.viewerHasStarred,e.repository.stargazers.totalCount=o[t].starrable.stargazers.totalCount}));e.writeQuery({data:i,query:M})}}},f=Object(c.useMutation)(L,p("+")),g=Object(m.a)(f,1)[0],b=Object(c.useMutation)(A,p("-")),v=Object(m.a)(b,1)[0];if(s)return r.a.createElement(K,null);if(d)return d.graphQLErrors.length>0&&"NOT_FOUND"===d.graphQLErrors[0].type?r.a.createElement(u.a,{to:"/notFound/Repository"}):r.a.createElement("h2",null,"Failed to fetch!");var h=i.repository;return r.a.createElement(x.Provider,{value:h},r.a.createElement("div",{className:"Repository"},r.a.createElement("h1",{className:"Repository__header"},h.name),r.a.createElement(Q,{star_unStar:function(e){var t=e.target,a={input:{starrableId:i.repository.id}};"Star"===t.textContent?g({variables:a}):v({variables:a})},viewerStared:h.viewerHasStarred})))}),X=a(78),Y=(a(128),r.a.memo((function(e){var t=e.data;return r.a.createElement("div",{className:"user"},r.a.createElement("div",{className:"user__picture",style:{background:"url(".concat(t.avatarUrl,")"),backgroundSize:"cover"}}),r.a.createElement("div",{className:"user__user-info"},r.a.createElement("p",null,r.a.createElement("strong",null,"Name:")," ",t.login),r.a.createElement("p",null,r.a.createElement("strong",null,"Biography:")," ",t.bio&&""!==t.bio.trim()?t.bio:"This user hasn't written any biography!"),r.a.createElement("p",null,r.a.createElement("strong",null,"Followers:")," ",t.followers.totalCount)))}),(function(e,t){return e.followers===t.followers}))),Z=(a(129),a(102)),ee=a.n(Z),te=a(103),ae=a.n(te),ne=r.a.memo((function(e){var t=e.data,a=e.navigateToRepository;return r.a.createElement("div",{className:"repository",onClick:function(){return a(t.name,t.owner.login)}},r.a.createElement("div",{className:"repository__left-part"},r.a.createElement("img",{src:ee.a,alt:"book icon"})),r.a.createElement("div",{className:"repository__right-part"},r.a.createElement("h3",null,t.name),r.a.createElement("span",null,t.owner.login),r.a.createElement("div",{className:"repository__sub-content"},r.a.createElement("span",null,r.a.createElement("img",{src:ae.a,alt:"star icon"})," ",t.stargazers.totalCount),r.a.createElement("span",null,t.licenseInfo?t.licenseInfo.name:"No license"),r.a.createElement("span",null,$(t.createdAt)))))})),re=(a(130),function(e){var t=e.repos,a=e.navigateToRepository,n=e.fetchMoreData,o=e.canFetchMore,l=e.waitRefetch;return r.a.createElement("div",{className:"repo-wrapper"},0===t.length?r.a.createElement("h1",null,"There is no repositories!"):null,t.map((function(e){return r.a.createElement(ne,{key:e.node.id,data:e.node,navigateToRepository:a})})),o&&r.a.createElement("button",{onClick:n,disabled:l},l?"Loading...":"Load More"))}),oe=(a(131),function(e){var t=e.match.params.username,a=e.history,o=Object(n.useState)(!1),l=Object(m.a)(o,2),i=l[0],s=l[1],d=Object(c.useQuery)(F,{variables:{login:t.slice(1)}}),p=d.data,f=d.loading,g=d.error,b=d.fetchMore,v=Object(n.useCallback)((function(e,t){a.push("/repository/".concat(e,"/@").concat(t))}),[a]);if(f)return r.a.createElement(K,null);if(g)return g.graphQLErrors.length>0&&"NOT_FOUND"===g.graphQLErrors[0].type?r.a.createElement(u.a,{to:"/notFound/User"}):r.a.createElement("h2",null,"Failed to fetch!");var h=p.user;return r.a.createElement("div",{className:"profile"},r.a.createElement(Y,{data:{avatarUrl:h.avatarUrl,login:h.login,bio:h.bio,followers:{totalCount:h.followers.totalCount}}}),r.a.createElement(re,{canFetchMore:h.repositories.pageInfo.hasNextPage,fetchMoreData:function(){s(!0),b({variables:{login:t.slice(1),cursor:p.user.repositories.pageInfo.endCursor},updateQuery:function(e,t){var a=t.fetchMoreResult;return Object(T.a)(e,(function(e){e.user.repositories.edges=[].concat(Object(X.a)(e.user.repositories.edges),Object(X.a)(a.user.repositories.edges)),e.user.repositories.pageInfo=a.user.repositories.pageInfo}))}}).then((function(e){return s(!1)}))},repos:h.repositories.edges,navigateToRepository:v,waitRefetch:i}))}),le=(a(132),function(e){var t=e.history,a=e.location.pathname.split("/");return r.a.createElement("div",{className:"not-found"},r.a.createElement("h1",null,a.length>2?"".concat(a[2]," not Found"):"Page not Found"),r.a.createElement("button",{onClick:function(){t.replace("/")}},"Go Home"))});a(133);var ie=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(u.d,null,r.a.createElement(u.b,{path:"/search",component:k}),r.a.createElement(u.b,{path:"/repository/:reponame/:owner",exact:!0,component:V}),r.a.createElement(u.b,{path:"/profile/:username",exact:!0,component:oe}),r.a.createElement(u.b,{path:"/notFound",component:le}),r.a.createElement(u.a,{from:"/",exact:!0,to:"/search"}),r.a.createElement(u.a,{to:"/notFound"})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(134);var ce=Object(s.a)((function(e){var t=e.networkError;t&&(429===t.statusCode?alert("There is too many requests, please try again later!"):alert("This is a network error, please reload the page!"))})),se=Object(c.createHttpLink)({uri:"https://api.github.com/graphql",headers:{Authorization:"bearer ".concat("449b85fcc9080938d676706bdf3c8677cae670dc")}}),ue=c.ApolloLink.concat(ce,se),me=new c.ApolloClient({link:ue,cache:new c.InMemoryCache});l.a.render(r.a.createElement(i.a,null,r.a.createElement(c.ApolloProvider,{client:me},r.a.createElement(w,null,r.a.createElement(ie,null)))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},72:function(e,t,a){e.exports=a.p+"static/media/Octocat.ef468e27.png"},99:function(e,t,a){e.exports=a.p+"static/media/search.7c4ce288.png"}},[[108,1,2]]]);
//# sourceMappingURL=main.7d4ead76.chunk.js.map